<?phprequire_once($_SERVER["DOCUMENT_ROOT"] . "/structs/game.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/structs/charity.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/structs/head2head.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/widget/head2head_verify.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/widget/charitySearch.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/widget/challengeFriends.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/utility/account.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/utility/postToWall.php");require_once($_SERVER["DOCUMENT_ROOT"] . "/utility/createHead2Head.php");if($_SERVER['REQUEST_METHOD'] == 'POST'){	if(isset($_POST["action"]))	{		if($_POST["action"] == "initial")		{			showSearchForm("verify");		} 		else if($_POST["action"] == "verify")		{				showVerify();		} 		else if($_POST["action"] == "create")		{			$newChallenge = createHead2Head($_POST["game_id"],$_POST["winner"],$_POST["charity_id"],$_POST["amount"]);			//sendOpenHead2HeadFbMessage($newChallenge);			showFriends($newChallenge);		} 		else if($_POST["action"] == "charityPair")		{				showSearchForm("pair");		} 		else if($_POST["action"] == "pair")		{				pairHead2HeadFbMessage($_POST["charity_id"],$_POST["challenge_id"]);		}	}}function pairHead2HeadFbMessage($charity_id,$challenge_id){	$me = getMe();	$challenge = Head2Head::getChallengeById($challenge_id);	$name = $challenge->get_user()->get_name();	$newChallenge = $challenge->create_and_save_paired_challenge($me->get_user_id(),$charity_id);	$amount = $newChallenge->get_amount();	$game_id = $newChallenge->get_game_id();	$winner_id = $newChallenge->get_team_id();	//sendPairedHead2HeadFbMessage($game_id,$winner_id,$charity_id,$amount, $name);		?>	You have officially accepted <b><?echo($name);?>'s</b> head 2 head Challenge!	<br>Now's the fun part, talk some <b>smack</b>. <span style='color:red;'>It's time to taunt</span> <?echo($name);?> and share it on	facebook! Of course you don't <b>HAVE</b> to, but that's part of the <span style='color:green;'><b>fun</b></span>! Especially since	you aren't actually winning anything, other than <span style='color:red;'><b>glory</b></span>, <b><i>bragging rights</i></b>, and making your	rival <span style='color:green;'><b>donate money</b></span> to your school. So go ahead, talk a little <span style='color:red;'><b>smack</b></span>, 	It's all in good fun!	<?}function sendOpenHead2HeadFbMessage($challenge){	$theGame = $challenge->get_game();	$amount = $challenge->get_amount();	$winningTeamName = $challenge->get_team()->get_name();	$losingTeamName = $challenge->get_losing_team()->get_name();	$charityName = $challenge->get_charity()->get_name();	$me = getMe();	$name = $me->get_name();		$message = "$name put down $$amount for $charityName and thinks $winningTeamName is going to kick $losingTeamName's arse during March Madness. Are you ready to put money up for charity? For glory? For the chance to rub $winningTeamName's loss in $name's face?";	$link = "https://schooldu.com/game_details.php?cid=" . $challenge->get_challenge_id();	postToWall($message,$link);}function sendPairedHead2HeadFbMessage($game_id,$winner,$charity_id,$amount, $opponentName){	$myName = getMe()->get_name();	$theGame = Game::getGameById($game_id);	$homeTeam = $theGame->get_home_team();	$awayTeam = $theGame->get_away_team();		$date = $theGame->get_date();	$awayTeamName = $awayTeam->get_name();			$homeTeamName = $homeTeam->get_name();		$winningTeam = Team::getTeamById($winner);	$winningTeamName = $winningTeam->get_name();		$charity = Charity::getCharityById($charity_id);	$charityName = $charity->get_name();	$message = "March Madness Schoold U Pair test, please disregard. $myName for $winningTeamName against $opponentName - $homeTeamName vs $awayTeamName on $date, $$amount.00. $myName Charity Choice: $charityName";	$link = "https://schooldu.com/";	postToWall($message,$link);}?>